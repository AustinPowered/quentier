cmake_minimum_required(VERSION 2.8)
if(POLICY CMP0020)
  cmake_policy(SET CMP0020 NEW)
endif()
project(QuteNote)

include("cmake/compiler.cmake")
include("cmake/qt.cmake")
include("cmake/libxml2.cmake")
include("cmake/openssl.cmake")
include("cmake/prepend.cmake")
include("cmake/boost.cmake")

set(CMAKE_EXPORT_COMPILE_COMMANDS ON)
enable_testing()

add_subdirectory(3rdparty)
get_directory_property(SIMPLECRYPT_LIB DIRECTORY 3rdparty DEFINITION SIMPLECRYPT_LIB)
get_directory_property(SIMPLECRYPT_SOURCES DIRECTORY 3rdparty DEFINITION ${SIMPLECRYPT_LIB}_SOURCES)
get_directory_property(QEVERCLOUD_LIB DIRECTORY 3rdparty DEFINITION QEVERCLOUD_LIB)
get_directory_property(QTKEYCHAIN_LIB DIRECTORY 3rdparty DEFINITION QTKEYCHAIN_LIB)
get_directory_property(STACKTRACE_LIB DIRECTORY 3rdparty DEFINITION STACKTRACE_LIB)
get_directory_property(QSLOG_LIB DIRECTORY 3rdparty DEFINITION QSLOG_LIB)
get_directory_property(QT4_MIMETYPES_LIB DIRECTORY 3rdparty DEFINITION QT4_MIMETYPES_LIB)
get_directory_property(QT4_MIMETYPES_SOURCES DIRECTORY 3rdparty DEFINITION ${QT4_MIMETYPES_LIB}_SOURCES)
get_directory_property(QT4_MIMETYPES_INCLUDE_DIRS DIRECTORY 3rdparty DEFINITION ${QT4_MIMETYPES_LIB}_INCLUDE_DIRS)
get_directory_property(THIRDPARTY_INCLUDE_DIRS DIRECTORY 3rdparty DEFINITION THIRDPARTY_INCLUDE_DIRS)

add_subdirectory(core)
get_directory_property(QUTE_NOTE_CORE_LIB DIRECTORY core DEFINITION PROJECT_NAME)
get_directory_property(QUTE_NOTE_CORE_SOURCES DIRECTORY core DEFINITION ${QUTE_NOTE_CORE_LIB}_SOURCES)
get_directory_property(QUTE_NOTE_CORE_INCLUDE_DIRS DIRECTORY core DEFINITION ${QUTE_NOTE_CORE_LIB}_INCLUDE_DIRS)

add_subdirectory(gui)
get_directory_property(QUTE_NOTE_APP DIRECTORY gui DEFINITION PROJECT_NAME)
get_directory_property(QUTE_NOTE_APP_SOURCES DIRECTORY gui DEFINITION ${QUTE_NOTE_APP}_SOURCES)
get_directory_property(QUTE_NOTE_APP_INCLUDE_DIRS DIRECTORY gui DEFINITION ${QUTE_NOTE_APP}_INCLUDE_DIRS)

set(QUTE_NOTE_CPPCHECKABLE_SOURCES "${SIMPLECRYPT_SOURCES}")
list(APPEND QUTE_NOTE_CPPCHECKABLE_SOURCES "${QUTE_NOTE_CORE_SOURCES}")
list(APPEND QUTE_NOTE_CPPCHECKABLE_SOURCES "${QUTE_NOTE_APP_SOURCES}")
list(APPEND QUTE_NOTE_CPPCHECKABLE_SOURCES "${QT4_MIMETYPES_SOURCES}")

set(QUTE_NOTE_CPPCHECKABLE_INCLUDE_DIRS "${SIMPLECRYPT_INCLUDE_DIRS}")
list(APPEND QUTE_NOTE_CPPCHECKABLE_INCLUDE_DIRS "${QUTE_NOTE_CORE_INCLUDE_DIRS}")
list(APPEND QUTE_NOTE_CPPCHECKABLE_INCLUDE_DIRS "${QUTE_NOTE_APP_INCLUDE_DIRS}")
list(APPEND QUTE_NOTE_CPPCHECKABLE_INCLUDE_DIRS "${QUTE_NOTE_APP_INCLUDE_DIRS}")

include("cmake/cppcheck.cmake")
